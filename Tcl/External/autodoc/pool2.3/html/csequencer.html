<html>
<head>
<title>File 'base/sequencer.cls' (part of 'Pool_Base')</title>
<link rel=stylesheet href="styles.css"
 type="text/css">
</head>
<body >
<h1>File 'base/sequencer.cls' (part of '<a href="pkg_Pool_Base.html" class="package">Pool_Base</a>')</h1>
<hr class="navbar">
<p class="navbar"><a href="index.htm" class="navbar">Home</a> | <a href="packages.html" class="index-package">Packages</a> | <a href="files.html" class="index-file">Files</a> | <a href="procs.html" class="index-procedure">Procedures</a> | <a href="classes.html" class="index-class">Classes</a> | <a href="namespaces.html" class="index-namespace">Namespaces</a> | <a href="keywords.html" class="index-keyword">Keywords</a> | <a href="deps.html" class="index-dependency">External packages</a> </p>
<hr class="navbar">

<div class="file-header">
<dl>
<dt><span class="header-title">Description (short)</span>
<dd><span class="header-description-value">Sequencer framework</span>
<dt><span class="header-title">Written by</span>
<dd><span class="header-author-value"><a href="mailto:a.kupries@westend.com" class="file-header">Andreas Kupries</a></span>
<dt><span class="header-title">Description</span>
<dd><span class="header-description-title">Framework for building sequencers. Currently used by the smtp and pop3 implementations. See <a href="seq.htm" class="xref-xref">background</a> for more information and &lt;f net/pop3/*&gt; and &lt;f net/smtp/*&gt; for examples of its usage.</span>
<dt><span class="header-title">Keywords</span>
<dd><span class="header-value">Sequencer,  State machines,  finite automatons</span>
</dl>
</div>
<h1 class="class">Class 'sequencer'</h1>
<div class="class-header">
<dl>
<a name="OptionsUp"></a>
<dt><span class="header-title"><a href="#Options" class="options">Options</a></span>
<dd><span class="header-value"><a href="#otimeout" class="options">timeout</a></span>
<a name="MethodsUp"></a>
<dt><a href="#Methods" class="methods">Methods</a>
<dd><dl>
<dt><span class="visibility">public</span>
<dd><a href="csequencer.html#psequencer_Event" class="proc">Event</a> <span class="arg-list">(event arglist)</span><br>
<a href="csequencer.html#psequencer_OnDone" class="proc">OnDone</a> <span class="arg-list">()</span><br>
<a href="csequencer.html#psequencer_OnLine" class="proc">OnLine</a> <span class="arg-list">(line)</span><br>
<a href="csequencer.html#psequencer_OnNext" class="proc">OnNext</a> <span class="arg-list">()</span><br>
<a href="csequencer.html#psequencer_Receive" class="proc">Receive</a> <span class="arg-list">(channel)</span><br>
<a href="csequencer.html#psequencer_Timeout" class="proc">Timeout</a> <span class="arg-list">(channel)</span><br>
<a href="csequencer.html#psequencer_errorInfo" class="proc">errorInfo</a> <span class="arg-list">()</span><br>
<a href="csequencer.html#psequencer_event" class="proc">event</a> <span class="arg-list">(event args)</span><br>
<a href="csequencer.html#psequencer_next" class="proc">next</a> <span class="arg-list">(method)</span><br>
<a href="csequencer.html#psequencer_state" class="proc">state</a> <span class="arg-list">()</span><br>
<a href="csequencer.html#psequencer_wait" class="proc">wait</a> <span class="arg-list">(channel method)</span>
</dl>

<a name="MembersUp"></a>
<dt><a href="#Members" class="members">Membervariables</a>
<dd><dl>
<dt><span class="visibility">public</span>
<dd><a href="#vstate" class="members">state</a><br>
<a href="#verror" class="members">error</a><br>
<a href="#vnextMethod" class="members">nextMethod</a><br>
<a href="#vlineMethod" class="members">lineMethod</a><br>
<a href="#vafter" class="members">after</a>
</dl>

</dl>
</div>
<hr class="class">
<a name="Options"></a>
<h2 class="options"><a href="#OptionsUp" class="options">Options</a></h2>
<div class="options">
<dl>
<a name="otimeout"></a>
<dt><span class="option-name">-timeout</span>
<dd><span class="option-description">  Timeout in milliseconds.</span>
</dl>
</div>
<hr class="class">
<a name="Methods"></a>
<h2 class="methods"><a href="#MethodsUp" class="methods">Methods</a></h2>
<a name="psequencer_Event"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">Event</span> <span class="arg-list">(event arglist)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">The real event handler. Execution is set up by <span class="xref-mref"><a href="csequencer.html#psequencer_event" class="proc">event</a></span>. Takes the same arguments.</span>
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: event
</td>
<td class="argument-description">
Name of event to raise. Allowed values are 'error', 'timeout', 'eof', 'line', 'next' and 'done'.
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: arglist
</td>
<td class="argument-description">
Arbitrary arguments given to the event. Only 'error' and 'line' actually use arguments (the first one only), all else ignore this information.
</td>
</tr>
</table>
</p>
<a name="psequencer_OnDone"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">OnDone</span> <span class="arg-list">()</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Abstract method. Called by the framework if the FA is done with its work (= upon event 'done').</span>
</td>
</tr>
</table>
</p>
<a name="psequencer_OnLine"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">OnLine</span> <span class="arg-list">(line)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Called by the framework to proceed after receiving a 'line' event. The default implementation uses <span class="xref-vref"><a href="csequencer.html#vlineMethod" class="xref-vref">lineMethod</a></span> to call the correct handler method.</span>
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: line
</td>
<td class="argument-description">
Contains the received information.
</td>
</tr>
</table>
</p>
<a name="psequencer_OnNext"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">OnNext</span> <span class="arg-list">()</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Called by the framework to proceed to the next step in the sequence (upon event 'next'). The default implementation uses <span class="xref-vref"><a href="csequencer.html#vnextMethod" class="xref-vref">nextMethod</a></span> to call the correct method.</span>
</td>
</tr>
</table>
</p>
<a name="psequencer_Receive"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">Receive</span> <span class="arg-list">(channel)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Callback executed in case of data arriving at <span class="argument"><span class="proc">channel</span></span>. May raise 'eof' and 'line' events in the sequencer. Will disable the timeout in this cases. In case of having received an incomplete line the system will just go to sleep again, to wait for more data.</span>
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: channel
</td>
<td class="argument-description">
Name of channel the sequencer waited for.
</td>
</tr>
</table>
</p>
<a name="psequencer_Timeout"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">Timeout</span> <span class="arg-list">(channel)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Callback executed in case of a timeout during the wait for input at <span class="argument"><span class="proc">channel</span></span>. Removes the fileevent handler, then raises the 'timeout' event in the sequencer.</span>
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: channel
</td>
<td class="argument-description">
Name of channel the sequencer waited for.
</td>
</tr>
</table>
</p>
<a name="psequencer_errorInfo"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">errorInfo</span> <span class="arg-list">()</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="proc">Returns</span>: The error information of this sequencer.
</td>
</tr>
</table>
</p>
<a name="psequencer_event"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">event</span> <span class="arg-list">(event args)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Raises <span class="argument"><span class="proc">event</span></span> in the given sequencer. Automatically the last command executed in the surounding context, i.e behaves as 'return'. The actual handling of the event is delayed by 'after' and done inside <span class="xref-mref"><a href="csequencer.html#psequencer_Event" class="proc">Event</a></span>.</span>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="proc">Notes</span>: Raising 'done' executes 'OnDone' and then automatically destroys the sequencer
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: event
</td>
<td class="argument-description">
Name of event to raise. Allowed values are 'error', 'timeout', 'eof', 'line', 'next' and 'done'.
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: args
</td>
<td class="argument-description">
Arbitrary arguments given to the event. Only 'error' and 'line' actually use arguments (the first one only), all else ignore this information.
</td>
</tr>
</table>
</p>
<a name="psequencer_next"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">next</span> <span class="arg-list">(method)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Defines a method to be executed if the 'next' event was triggered. Removes any existing 'line' handler.</span>
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: method
</td>
<td class="argument-description">
The method to set as 'next' handler.
</td>
</tr>
</table>
</p>
<a name="psequencer_state"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">state</span> <span class="arg-list">()</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="proc">Returns</span>: The state of this sequencer.
</td>
</tr>
</table>
</p>
<a name="psequencer_wait"></a>
<p class="proc"><table border width=100% class="proc">
<tr class="proc">
<td colspan=2 class="proc">
<h2 class="proc"><span class="proc-name">wait</span> <span class="arg-list">(channel method)</span></h2>
</td>
</tr>
<tr class="proc">
<td colspan=2 class="proc">
<span class="header-description-value">Convenience procedure to setup the sequencer to wait for input on a <span class="argument"><span class="proc">channel</span></span>. After receiving a complete line the appropriate event will be raised. The wait will be able to time out if such information is part of the sequencer configuration. Removes any existing 'next' handler .</span>
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: channel
</td>
<td class="argument-description">
Name of channel to wait on for input.
</td>
</tr>
<tr class="proc">
<td class="argument-name">
<span class="argument-name">Argument</span>: method
</td>
<td class="argument-description">
Name of the method to execute after a line was received.
</td>
</tr>
</table>
</p>
<hr class="class">
<a name="Members"></a>
<h2 class="members"><a href="#MembersUp" class="members">Membervariables</a></h2>
<div class="members">
<dl>
<a name="vstate"></a>
<dt><span class="variable-name">state</span>
<dd><span class="variable-description">  The current state of the sequencer. One of: error, timeout,  eof, done, next or line. Equal to the last event executed by  us.</span>
<a name="verror"></a>
<dt><span class="variable-name">error</span>
<dd><span class="variable-description">  Error message placed into the sequencer by a derived class.</span>
<a name="vnextMethod"></a>
<dt><span class="variable-name">nextMethod</span>
<dd><span class="variable-description">  Name of the method to call upon receiving the 'next'  event.</span>
<a name="vlineMethod"></a>
<dt><span class="variable-name">lineMethod</span>
<dd><span class="variable-description">  Name of the method to call upon receiving the 'line'  event.</span>
<a name="vafter"></a>
<dt><span class="variable-name">after</span>
<dd><span class="variable-description">  The handle of the timeout set via <span class="xref-mref"><a href="csequencer.html#psequencer_wait" class="proc">wait</a></span>.</span>
</dl>
</div>
<hr class="navbar">
<p class="navbar"><a href="index.htm" class="navbar">Home</a> | <a href="packages.html" class="index-package">Packages</a> | <a href="files.html" class="index-file">Files</a> | <a href="procs.html" class="index-procedure">Procedures</a> | <a href="classes.html" class="index-class">Classes</a> | <a href="namespaces.html" class="index-namespace">Namespaces</a> | <a href="keywords.html" class="index-keyword">Keywords</a> | <a href="deps.html" class="index-dependency">External packages</a> </p>
<hr class="navbar">

<hr>
<p class="generated-by">Generated by <a href="http://www.oche.de/~akupries/soft/autodoc/index.htm" class="generated-by">AutoDoc 2.4</a> at 09/14/2000, invoked by <a href="mailto:a.kupries@westend.com" class="generated-by">Andreas Kupries</a></p>
</body>
</html>
